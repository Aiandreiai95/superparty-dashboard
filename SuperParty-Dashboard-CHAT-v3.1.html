<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuperParty üéâ - Dashboard</title>
    
    <!-- Supabase Client Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
        }
        
        /* Sidebar */
        .sidebar {
            width: 280px;
            background: white;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
            z-index: 100;
        }
        
        .sidebar-header {
            padding: 35px 20px 30px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            position: relative;
            overflow: hidden;
            text-align: center;
        }
        
        /* Animated background particles */
        .sidebar-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: particlesMove 20s linear infinite;
        }
        
        @keyframes particlesMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
        
        .sidebar-header h1 {
            font-size: 28px;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
            font-weight: 800;
            letter-spacing: 1px;
            animation: glow 2s ease-in-out infinite;
            text-align: center;
        }
        
        @keyframes glow {
            0%, 100% { text-shadow: 0 0 10px rgba(255,255,255,0.5), 0 0 20px rgba(255,255,255,0.3); }
            50% { text-shadow: 0 0 20px rgba(255,255,255,0.8), 0 0 30px rgba(255,255,255,0.5); }
        }
        
        .sidebar-header .by-ai {
            font-size: 16px;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-weight: 700;
            letter-spacing: 2px;
            width: 100%;
        }
        
        .sidebar-header .by-ai > span:first-child {
            margin-right: 2px;
        }
        
        .sidebar-header .by-ai > span:last-child {
            margin-left: 2px;
        }
        
        .ai-badge {
            background: rgba(255,255,255,0.25);
            padding: 6px 16px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 800;
            animation: pulse 2s ease-in-out infinite;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.9; }
            50% { transform: scale(1.05); opacity: 1; }
        }
        
        .ai-icon {
            display: inline-block;
            animation: rotate 3s linear infinite;
            font-size: 20px;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .sparkle {
            display: inline-block;
            animation: sparkle 1.5s ease-in-out infinite;
            font-size: 20px;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(0.8); }
        }
        
        /* Floating AI Chat Button */
        .ai-chat-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50px;
            padding: 18px 28px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
            animation: floatButton 3s ease-in-out infinite;
        }
        
        .ai-chat-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 12px 35px rgba(102, 126, 234, 0.6);
        }
        
        .ai-chat-button:active {
            transform: translateY(-2px) scale(1.02);
        }
        
        @keyframes floatButton {
            0%, 100% { 
                transform: translateY(0px);
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            }
            50% { 
                transform: translateY(-10px);
                box-shadow: 0 15px 35px rgba(102, 126, 234, 0.5);
            }
        }
        
        .ai-chat-icon {
            font-size: 24px;
            animation: robotTalk 1s ease-in-out infinite;
        }
        
        @keyframes robotTalk {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }
        
        .ai-chat-pulse {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            border-radius: 50px;
            background: rgba(102, 126, 234, 0.3);
            animation: pulseRing 2s ease-out infinite;
            z-index: -1;
        }
        
        @keyframes pulseRing {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 0;
            }
        }
        
        /* Welcome Page Animations */
        @keyframes bounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* CHAT SYSTEM STYLES */
        .chat-container {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
            height: calc(100vh - 160px);
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        /* Chat Sidebar - Lista Evenimente */
        .chat-sidebar {
            background: #f9fafb;
            border-right: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .chat-sidebar-header {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .chat-sidebar-header h3 {
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .chat-sidebar-header p {
            font-size: 13px;
            opacity: 0.9;
        }
        
        .chat-search {
            padding: 15px;
            background: white;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .chat-search input {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .chat-search input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .chat-events-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }
        
        .chat-event-item {
            padding: 15px;
            margin-bottom: 8px;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            position: relative;
        }
        
        .chat-event-item:hover {
            border-color: #667eea;
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);
        }
        
        .chat-event-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }
        
        .chat-event-name {
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .chat-event-date {
            font-size: 12px;
            opacity: 0.7;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .chat-event-item.active .chat-event-date {
            opacity: 0.9;
        }
        
        .unread-badge {
            background: #ef4444;
            color: white;
            font-size: 11px;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 12px;
            min-width: 20px;
            text-align: center;
        }
        
        .chat-event-item.active .unread-badge {
            background: white;
            color: #667eea;
        }
        
        /* Chat Main Area */
        .chat-main {
            display: flex;
            flex-direction: column;
            background: white;
        }
        
        .chat-header {
            padding: 20px 30px;
            background: white;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .chat-header-info h3 {
            font-size: 20px;
            color: #1f2937;
            margin-bottom: 5px;
        }
        
        .chat-header-info p {
            font-size: 13px;
            color: #6b7280;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .chat-header-actions {
            display: flex;
            gap: 10px;
        }
        
        .chat-header-btn {
            padding: 8px 16px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .chat-header-btn:hover {
            border-color: #667eea;
            color: #667eea;
            transform: translateY(-2px);
        }
        
        /* Messages Area */
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            background: #f9fafb;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .chat-message {
            display: flex;
            gap: 12px;
            align-items: flex-start;
            animation: messageSlideIn 0.3s ease;
        }
        
        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .chat-message.sent {
            flex-direction: row-reverse;
        }
        
        .chat-message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: 700;
            flex-shrink: 0;
        }
        
        .chat-message.sent .chat-message-avatar {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .chat-message-content {
            max-width: 60%;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .chat-message.sent .chat-message-content {
            align-items: flex-end;
        }
        
        .chat-message-bubble {
            padding: 12px 18px;
            border-radius: 18px;
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            word-wrap: break-word;
        }
        
        .chat-message.sent .chat-message-bubble {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .chat-message-text {
            font-size: 15px;
            line-height: 1.5;
        }
        
        .chat-message-time {
            font-size: 11px;
            color: #9ca3af;
            padding: 0 5px;
        }
        
        .chat-message.sent .chat-message-time {
            text-align: right;
        }
        
        /* Chat Input */
        .chat-input-container {
            padding: 20px 30px;
            background: white;
            border-top: 1px solid #e5e7eb;
        }
        
        .chat-input-wrapper {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .chat-input {
            flex: 1;
            padding: 14px 20px;
            border: 2px solid #e5e7eb;
            border-radius: 25px;
            font-size: 15px;
            transition: all 0.3s;
            resize: none;
            font-family: inherit;
            max-height: 120px;
        }
        
        .chat-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .chat-input-actions {
            display: flex;
            gap: 8px;
        }
        
        .chat-action-btn {
            width: 48px;
            height: 48px;
            border: none;
            background: #f3f4f6;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .chat-action-btn:hover {
            background: #e5e7eb;
            transform: scale(1.1);
        }
        
        .chat-send-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .chat-send-btn:hover {
            background: linear-gradient(135deg, #5568d3 0%, #653a8b 100%);
            transform: scale(1.1);
        }
        
        .chat-send-btn:active {
            transform: scale(1.05);
        }
        
        /* Empty State */
        .chat-empty-state {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #9ca3af;
            gap: 15px;
        }
        
        .chat-empty-state-icon {
            font-size: 64px;
            opacity: 0.5;
            animation: float 3s ease-in-out infinite;
        }
        
        .chat-empty-state h3 {
            font-size: 20px;
            color: #6b7280;
        }
        
        .chat-empty-state p {
            font-size: 14px;
            text-align: center;
            max-width: 300px;
        }
        
        .sidebar-menu {
            flex: 1;
            padding: 20px 0;
            overflow-y: auto;
        }
        
        .menu-item {
            padding: 15px 25px;
            color: #4b5563;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 16px;
            font-weight: 500;
            border-left: 3px solid transparent;
        }
        
        .menu-item:hover {
            background: #f3f4f6;
            color: #667eea;
            border-left-color: #667eea;
        }
        
        .menu-item.active {
            background: #ede9fe;
            color: #667eea;
            border-left-color: #667eea;
        }
        
        .menu-icon {
            font-size: 20px;
            width: 24px;
            text-align: center;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 40px;
            overflow-y: auto;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Page Header */
        .page-header {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .page-header h2 {
            font-size: 32px;
            color: #1f2937;
            margin-bottom: 10px;
        }
        
        .page-header p {
            color: #6b7280;
            font-size: 16px;
        }
        
        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            text-align: center;
            transition: all 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }
        
        .stat-number {
            font-size: 36px;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #6b7280;
            font-size: 14px;
        }
        
        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }
        
        .card-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
            color: #1f2937;
        }
        
        .card-content {
            color: #6b7280;
            font-size: 15px;
            line-height: 1.6;
        }
        
        .card-content p {
            margin-bottom: 8px;
        }
        
        /* List */
        .list {
            background: white;
            border-radius: 15px;
            padding: 0;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .list-item {
            padding: 20px 25px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }
        
        .list-item:last-child {
            border-bottom: none;
        }
        
        .list-item:hover {
            background: #f9fafb;
        }
        
        .list-title {
            font-weight: 600;
            color: #1f2937;
            font-size: 16px;
        }
        
        .list-subtitle {
            color: #6b7280;
            font-size: 14px;
            margin-top: 5px;
        }
        
        .badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .badge-success {
            background: #d1fae5;
            color: #047857;
        }
        
        .badge-warning {
            background: #fef3c7;
            color: #b45309;
        }
        
        .badge-info {
            background: #dbeafe;
            color: #0369a1;
        }
        
        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 101;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 20px;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .mobile-menu-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 30px rgba(102, 126, 234, 0.6);
        }
        
        .mobile-menu-toggle:active {
            transform: scale(0.95);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 1001;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                padding: 20px;
                padding-top: 80px;
                transition: none;
                width: 100%;
            }
            
            /* Overlay √Æntunecat c√¢nd sidebar-ul e deschis */
            .sidebar.open::before {
                content: '';
                position: fixed;
                top: 0;
                left: 280px;
                width: calc(100vw - 280px);
                height: 100vh;
                background: rgba(0, 0, 0, 0.5);
                z-index: -1;
                animation: fadeIn 0.3s ease;
            }
            
            .page-header {
                margin-top: 0;
            }
            
            .page-header h2 {
                font-size: 24px;
            }
            
            .page-header p {
                font-size: 14px;
            }
            
            .mobile-menu-toggle {
                display: flex !important;
                transition: all 0.3s ease;
                z-index: 1002;
            }
            
            .cards-grid,
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuBtn" onclick="toggleSidebar()">‚ò∞</button>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1>üéâ SuperParty</h1>
            <div class="by-ai">
                <span>BY</span>
                <span class="ai-badge" id="adminTrigger" style="cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'" title="">
                    <span class="ai-icon">ü§ñ</span>
                    <span>AI</span>
                </span>
                <span class="sparkle">‚ú®</span>
            </div>
        </div>
        
        <div class="sidebar-menu" id="mainMenu">
            <div class="menu-item active" onclick="showPage('home')">
                <span class="menu-icon">üè†</span>
                <span>AcasƒÉ</span>
            </div>
            <div class="menu-item" onclick="showPage('noteaza-eveniment')">
                <span class="menu-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 24px;">‚ûï</span>
                <span style="color: #10b981; font-weight: 600;">NoteazƒÉ Eveniment</span>
            </div>
            <div class="menu-item" onclick="showPage('petreceri-nealocate')">
                <span class="menu-icon">üìã</span>
                <span>Petreceri Nealocate</span>
            </div>
            <div class="menu-item" onclick="showPage('ce-petreceri-am')">
                <span class="menu-icon">üéä</span>
                <span>Ce Petreceri Am</span>
            </div>
            <div class="menu-item" onclick="showPage('total-petreceri')">
                <span class="menu-icon">üìà</span>
                <span>Total Petreceri</span>
            </div>
            <div class="menu-item" onclick="showPage('soferi')">
                <span class="menu-icon">üöó</span>
                <span>Evenimente cu »òoferi</span>
            </div>
            <div class="menu-item" onclick="showPage('cu-factura')">
                <span class="menu-icon">üßæ</span>
                <span>Cu FacturƒÉ</span>
            </div>
            <div class="menu-item" onclick="showPage('chat-clienti')">
                <span class="menu-icon">üí¨</span>
                <span>Chat Clien»õi</span>
            </div>
            <div class="menu-item" onclick="showPage('echipa')">
                <span class="menu-icon">üë•</span>
                <span>Echipa</span>
            </div>
            <div class="menu-item" onclick="showPage('inventar')">
                <span class="menu-icon">üì¶</span>
                <span>Inventar</span>
            </div>
            <div class="menu-item" onclick="showPage('piniata')">
                <span class="menu-icon">üéØ</span>
                <span>Piniata</span>
            </div>
            
            <!-- ADMIN MENU - Hidden by default -->
            <div id="adminMenu" style="display: none;">
                <div style="border-top: 2px solid #ef4444; margin: 15px 0; padding-top: 15px;">
                    <div style="color: #ef4444; font-weight: 700; font-size: 12px; padding: 0 20px 10px 20px; letter-spacing: 1px;">üîê ADMIN MODE</div>
                </div>
                <div class="menu-item active" onclick="showPage('bifeaza-evenimente')" style="background: rgba(239, 68, 68, 0.1);">
                    <span class="menu-icon">‚úÖ</span>
                    <span style="color: #ef4444; font-weight: 600;">BifeazƒÉ Evenimente</span>
                </div>
                <div class="menu-item" onclick="logoutAdmin()" style="background: rgba(239, 68, 68, 0.2); margin-top: 20px;">
                    <span class="menu-icon">üö™</span>
                    <span style="color: #ef4444; font-weight: 700;">Ie»ôire Admin</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <!-- Welcome Home Page (Default - COMPLETELY EMPTY) -->
        <div class="page active" id="home">
            <!-- GOL - Nimic aici -->
        </div>
        
        <!-- Page: NoteazƒÉ Eveniment (FORM) -->
        <div class="page" id="noteaza-eveniment">
            <div class="page-header">
                <h2>‚ûï NoteazƒÉ Eveniment Nou</h2>
                <p>CompleteazƒÉ formularul pentru a adƒÉuga un eveniment nou</p>
            </div>
            
            <!-- √énregistreazƒÉ Colaboratori Button -->
            <div style="margin-bottom: 25px;">
                <button onclick="openColaboratoriModal()" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border: none; padding: 15px 25px; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 16px; box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4); transition: all 0.3s; display: inline-flex; align-items: center; gap: 10px;">
                    <span style="font-size: 22px;">üë•</span>
                    <span>√énregistreazƒÉ Colaboratori</span>
                </button>
            </div>
            
            <!-- AI Photo Scan Section -->
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px; padding: 25px; margin-bottom: 25px; box-shadow: 0 8px 30px rgba(102, 126, 234, 0.3);">
                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                    <div style="font-size: 40px;">üì∏</div>
                    <div>
                        <h3 style="color: white; font-size: 20px; font-weight: 700; margin: 0 0 5px 0;">ScaneazƒÉ Formular cu AI</h3>
                        <p style="color: rgba(255,255,255,0.9); font-size: 14px; margin: 0;">√éncarcƒÉ o pozƒÉ »ôi AI va completa automat c√¢mpurile din formular</p>
                    </div>
                </div>
                
                <input type="file" id="aiPhotoInput" accept="image/*" capture="environment" style="display: none;" onchange="processPhotoWithAI(this)">
                
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button type="button" onclick="document.getElementById('aiPhotoInput').click()" style="flex: 1; min-width: 200px; background: white; color: #667eea; border: none; padding: 15px 20px; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <span style="font-size: 20px;">üì∑</span>
                        <span>FƒÉ PozƒÉ</span>
                    </button>
                    
                    <button type="button" onclick="document.getElementById('aiPhotoInput').click()" style="flex: 1; min-width: 200px; background: rgba(255,255,255,0.2); color: white; border: 2px solid white; padding: 15px 20px; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 15px; transition: all 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <span style="font-size: 20px;">üñºÔ∏è</span>
                        <span>√éncarcƒÉ PozƒÉ</span>
                    </button>
                </div>
                
                <!-- Preview Area -->
                <div id="photoPreview" style="margin-top: 15px; display: none;">
                    <div style="background: rgba(255,255,255,0.2); border-radius: 12px; padding: 15px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;">
                            <span style="color: white; font-weight: 600;">ü§ñ AI ProceseazƒÉ imaginea...</span>
                            <div style="width: 20px; height: 20px; border: 3px solid white; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                        </div>
                        <img id="previewImage" style="width: 100%; max-height: 300px; object-fit: contain; border-radius: 8px; background: white;">
                    </div>
                </div>
            </div>
            
            <!-- Form Container -->
            <div style="background: white; border-radius: 20px; padding: 30px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);">
                <form id="eventForm" onsubmit="handleFormSubmit(event)">
                    <!-- Data primit formular -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Pe ce data ai primit formularul</label>
                        <input type="text" name="dataFormular" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="15/11/2025" pattern="\d{2}/\d{2}/\d{4}" required>
                    </div>
                    
                    <!-- Adauga dovada primit formular -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Adauga dovada primit formular</label>
                        <input type="file" id="dovadaFormular" name="dovadaFormular" accept="image/*" style="display: none;">
                        <button type="button" onclick="document.getElementById('dovadaFormular').click()" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; background: white; text-align: left; cursor: pointer; font-size: 15px; color: #6b7280;">
                            üñºÔ∏è Add image
                        </button>
                    </div>
                    
                    <!-- Cine noteaza -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Cine noteaza eveniment</label>
                        <input type="text" name="cineNoteaza" list="trainerCodes" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Scrie cod (ex: A1, B5, Z50)" required>
                        <p style="margin-top: 5px; font-size: 12px; color: #9ca3af; font-style: italic;">üí° Scrie litera »ôi numƒÉrul (A1-Z50) - lista se filtreazƒÉ automat</p>
                    </div>
                    
                    <!-- Numar eveniment - COD UNIC -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 12px; font-weight: 500;">Cod unic eveniment</label>
                        <div style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px 30px; border-radius: 15px; font-size: 42px; font-weight: 700; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                            <span id="numarEveniment">318</span>
                        </div>
                        <p style="margin-top: 8px; font-size: 12px; color: #9ca3af; font-style: italic;">Generator automat - folosit pentru dublarea evenimentelor √Æn func»õie de roluri</p>
                    </div>
                    
                    <!-- De pe ce a intrat -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">De pe ce a intrat clientul</label>
                        <select name="sursa" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Facebook</option>
                            <option>Instagram</option>
                            <option>Google</option>
                            <option>Recomandare</option>
                            <option>WhatsApp</option>
                            <option>Altele</option>
                        </select>
                    </div>
                    
                    <!-- De unde a intrat -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">De unde a intrat clientul</label>
                        <select name="locatie" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Bucure»ôti</option>
                            <option>Ilfov</option>
                            <option>Constan»õa</option>
                            <option>Bra»ôov</option>
                            <option>Cluj</option>
                            <option>Altele</option>
                        </select>
                    </div>
                    
                    <!-- Telefon -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Numar de telefon</label>
                        <input type="tel" name="telefon" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="+40 700 000 000" required>
                    </div>
                    
                    <!-- Necesita sofer -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Necesita sofer</label>
                        <select name="necesitaSofer" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Da</option>
                            <option>Nu</option>
                        </select>
                    </div>
                    
                    <!-- Personaj -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Personaj</label>
                        <select name="personaj" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Optimus Prime</option>
                            <option>Bumblebee</option>
                            <option>Spider-Man</option>
                            <option>Batman</option>
                            <option>Elsa</option>
                            <option>Altele</option>
                        </select>
                    </div>
                    
                    <!-- Ce personaj vrei sa fi -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Ce personaj vrei sa fi</label>
                        <input type="text" name="personajDorit" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Introdu personajul...">
                    </div>
                    
                    <!-- Data si ora petrecere -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Data petrecere (zi/luna/an)</label>
                        <input type="text" name="dataPetrecere" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="15/11/2025" pattern="\d{2}/\d{2}/\d{4}" required>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Ora petrecere</label>
                        <input type="time" name="oraPetrecere" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                    </div>
                    
                    <!-- Durata -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Durata</label>
                        <input type="number" name="durata" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="123" required>
                    </div>
                    
                    <!-- Cate ore ai vandut -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Cate ore ai vandut in eveniment</label>
                        <select name="oreVandute" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>1 orƒÉ</option>
                            <option>2 ore</option>
                            <option>3 ore</option>
                            <option>4 ore</option>
                            <option>5 ore</option>
                        </select>
                    </div>
                    
                    <!-- Cate persoane necesare -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Cate persoane sunt necesare</label>
                        <select name="persoaneNecesare" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>1 persoanƒÉ</option>
                            <option>2 persoane</option>
                            <option>3 persoane</option>
                            <option>4 persoane</option>
                        </select>
                    </div>
                    
                    <!-- Adresa -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Adresa</label>
                        <input type="text" name="adresa" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Bucure»ôti, Sector 3" required>
                    </div>
                    
                    <!-- Total -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Total</label>
                        <input type="number" name="total" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="123" required>
                    </div>
                    
                    <!-- MetodƒÉ PlatƒÉ -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Cum se √ÆncaseazƒÉ? üí≥</label>
                        <select name="metodaPlata" id="metodaPlata" onchange="handleMetodaPlataChange()" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option value="Cash la final">üíµ Cash la final de petrecere</option>
                            <option value="Prin factura">üßæ Prin facturƒÉ</option>
                            <option value="Alta varianta">‚úÖ AltƒÉ variantƒÉ / A plƒÉtit</option>
                            <option value="Card partial + Cash rest">üí≥ Pe card o parte + restul cash</option>
                            <option value="Cash partial + Card rest">üíµ Cash o parte + restul pe card</option>
                        </select>
                    </div>
                    
                    <!-- C√¢mp condi»õionat: Card partial -->
                    <div id="campCardPartial" style="margin-bottom: 20px; display: none;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">üí≥ C√¢t s-a plƒÉtit pe card?</label>
                        <input type="number" name="sumaCard" id="sumaCard" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: 150">
                        <p style="margin-top: 5px; font-size: 13px; color: #6b7280;">Restul se va plƒÉti cash</p>
                    </div>
                    
                    <!-- C√¢mp condi»õionat: Cash partial -->
                    <div id="campCashPartial" style="margin-bottom: 20px; display: none;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">üíµ C√¢t s-a plƒÉtit cash?</label>
                        <input type="number" name="sumaCash" id="sumaCash" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: 100">
                        <p style="margin-top: 5px; font-size: 13px; color: #6b7280;">Restul se va plƒÉti pe card</p>
                    </div>
                    
                    <!-- Servicii dorite -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Servicii dorite</label>
                        <select name="servicii" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Anima»õie</option>
                            <option>Piniata</option>
                            <option>Facepainting</option>
                            <option>Baloane</option>
                            <option>MuzicƒÉ</option>
                        </select>
                    </div>
                    
                    <!-- Are piniata -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Are piniata</label>
                        <select name="arePiniata" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Da</option>
                            <option>Nu</option>
                        </select>
                    </div>
                    
                    <!-- Prenume parinte -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Prenume parinte</label>
                        <input type="text" name="prenumeParinte" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Introdu prenumele..." required>
                    </div>
                    
                    <!-- Prenume copil -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Prenume copil</label>
                        <input type="text" name="prenumeCopil" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Alexandru" required>
                    </div>
                    
                    <!-- Varsta copil -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Varsta copil</label>
                        <input type="number" name="varstaCopil" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="123" required>
                    </div>
                    
                    <!-- Numar copii aproximativ -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Numar copii aproximativ</label>
                        <select name="numarCopii" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>5-10 copii</option>
                            <option>10-15 copii</option>
                            <option>15-20 copii</option>
                            <option>20+ copii</option>
                        </select>
                    </div>
                    
                    <!-- Alte detalii -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Alte detalii</label>
                        <textarea name="alteDetalii" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px; min-height: 80px; resize: vertical;" placeholder="Detalii suplimentare..."></textarea>
                    </div>
                    
                    <!-- Cum se incaseaza -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Cum se incaseaza</label>
                        <select name="cumSeIncaseaza" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Cash</option>
                            <option>Card</option>
                            <option>Transfer bancar</option>
                        </select>
                    </div>
                    
                    <!-- Situatie incasare -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Situatie incasare</label>
                        <select name="situatieIncasare" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>PlƒÉtit integral</option>
                            <option>Avans</option>
                            <option>NeplƒÉtit</option>
                        </select>
                    </div>
                    
                    <!-- Scrie datele de facturare -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Scrie datele de facturare</label>
                        <select name="dateleFacturare" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" required>
                            <option value="">SelecteazƒÉ...</option>
                            <option>Da - necesitƒÉ facturƒÉ</option>
                            <option>Nu - nu necesitƒÉ facturƒÉ</option>
                        </select>
                    </div>
                    
                    <!-- Dovada platii -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Dovada platii</label>
                        <input type="file" id="dovadaPlatii" name="dovadaPlatii" accept="image/*" style="display: none;">
                        <button type="button" onclick="document.getElementById('dovadaPlatii').click()" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; background: white; text-align: left; cursor: pointer; font-size: 15px; color: #6b7280;">
                            üñºÔ∏è Add image
                        </button>
                    </div>
                    
                    <!-- Dovada Factura -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Dovada Factura</label>
                        <input type="file" id="dovadaFactura" name="dovadaFactura" accept="image/*" style="display: none;">
                        <button type="button" onclick="document.getElementById('dovadaFactura').click()" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; background: white; text-align: left; cursor: pointer; font-size: 15px; color: #6b7280;">
                            üñºÔ∏è Add image
                        </button>
                    </div>
                    
                    <!-- Submit Button -->
                    <button type="submit" style="width: 100%; padding: 16px; background: #f0f0f0; color: #666; border: none; border-radius: 12px; font-size: 18px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                        Am terminat!
                    </button>
                </form>
            </div>
        </div>
        
        <!-- Page: Petreceri Nealocate -->
        <div class="page active" id="petreceri-nealocate">
            <div class="page-header">
                <h2>üìã Petreceri Nealocate</h2>
                <p>Lista petrecerilor care a»ôteaptƒÉ sƒÉ fie alocate unui »ôofer</p>
            </div>
        </div>
        
        <!-- Page: Ce Petreceri Am -->
        <div class="page" id="ce-petreceri-am">
            <div class="page-header">
                <h2>üéä Ce Petreceri Am</h2>
                <p>Lista completƒÉ a petrecerilor tale programate</p>
            </div>
        </div>
        
        <!-- Page: Total Petreceri -->
        <div class="page" id="total-petreceri">
            <div class="page-header">
                <h2>üìà Total Petreceri</h2>
                <p>Statistici complete despre toate petrecerile</p>
            </div>
        </div>
        
        <!-- Page: Evenimente cu »òoferi -->
        <div class="page" id="soferi">
            <!-- GOL - Nimic aici -->
        </div>
        
        <!-- Page: Evenimente cu FacturƒÉ -->
        <div class="page" id="cu-factura">
            <div class="page-header">
                <h2>üßæ Evenimente cu FacturƒÉ</h2>
                <p>Toate evenimentele plƒÉtite prin facturƒÉ</p>
            </div>
            
            <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 2px 15px rgba(0,0,0,0.08);">
                <!-- Statistici Rapide -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 25px;">
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 12px; color: white;">
                        <div style="font-size: 32px; font-weight: 800;" id="totalFacturi">0</div>
                        <div style="opacity: 0.9; font-size: 14px;">Total Facturi</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); padding: 20px; border-radius: 12px; color: white;">
                        <div style="font-size: 32px; font-weight: 800;" id="sumaFacturi">0 RON</div>
                        <div style="opacity: 0.9; font-size: 14px;">Valoare TotalƒÉ</div>
                    </div>
                </div>
                
                <!-- Lista Evenimente -->
                <div id="listaFacturi" style="margin-top: 20px;">
                    <p style="text-align: center; color: #6b7280; padding: 40px 0;">
                        üìÑ Nu existƒÉ evenimente cu facturƒÉ √ÆncƒÉ
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Page: Chat Clien»õi -->
        <div class="page" id="chat-clienti">
            <div class="page-header">
                <h2>üí¨ Chat Clien»õi</h2>
                <p>Conversa»õii cu clien»õii pentru fiecare eveniment</p>
            </div>
            
            <div class="chat-container">
                <!-- Chat Sidebar - Lista Evenimente -->
                <div class="chat-sidebar">
                    <div class="chat-sidebar-header">
                        <h3>üìã Evenimente</h3>
                        <p>SelecteazƒÉ un eveniment pentru chat</p>
                    </div>
                    
                    <div class="chat-search">
                        <input type="text" id="chatSearchInput" placeholder="üîç CautƒÉ eveniment..." onkeyup="searchChatEvents()">
                    </div>
                    
                    <div class="chat-events-list" id="chatEventsList">
                        <!-- Events will be loaded here -->
                        <div style="text-align: center; padding: 40px 20px; color: #9ca3af;">
                            <div style="font-size: 48px; margin-bottom: 15px;">üì≠</div>
                            <p>Se √ÆncarcƒÉ evenimente...</p>
                        </div>
                    </div>
                </div>
                
                <!-- Chat Main Area -->
                <div class="chat-main" id="chatMainArea">
                    <div class="chat-empty-state">
                        <div class="chat-empty-state-icon">üí¨</div>
                        <h3>SelecteazƒÉ un eveniment</h3>
                        <p>Alege un eveniment din listƒÉ pentru a vedea sau √Æncepe o conversa»õie</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Page: Echipa -->
        <div class="page" id="echipa">
            <div class="page-header">
                <h2>üë• Echipa</h2>
                <p>GestioneazƒÉ membrii echipei tale</p>
            </div>
            
            <!-- Add Member Button -->
            <div style="margin-bottom: 30px;">
                <button onclick="addTeamMember()" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 12px 24px; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 15px; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3); transition: all 0.3s;">
                    ‚ûï AdaugƒÉ Membru
                </button>
            </div>
            
            <!-- Team Table -->
            <div style="background: white; border-radius: 20px; padding: 30px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); overflow-x: auto;">
                <table id="teamTable" style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="border-bottom: 2px solid #e5e7eb;">
                            <th style="padding: 15px; text-align: left; color: #6b7280; font-weight: 600; font-size: 14px;">Nume</th>
                            <th style="padding: 15px; text-align: left; color: #6b7280; font-weight: 600; font-size: 14px;">Telefon</th>
                            <th style="padding: 15px; text-align: left; color: #6b7280; font-weight: 600; font-size: 14px;">Ce cod am</th>
                            <th style="padding: 15px; text-align: left; color: #6b7280; font-weight: 600; font-size: 14px;">Rol</th>
                            <th style="padding: 15px; text-align: center; color: #6b7280; font-weight: 600; font-size: 14px;">Ac»õiuni</th>
                        </tr>
                    </thead>
                    <tbody id="teamTableBody">
                        <!-- Exemplu de r√¢nd -->
                        <tr style="border-bottom: 1px solid #f3f4f6;">
                            <td style="padding: 15px; color: #111827; font-weight: 500;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 16px;">
                                        A
                                    </div>
                                    <span>Andrei Popescu</span>
                                </div>
                            </td>
                            <td style="padding: 15px; color: #6b7280;">
                                <span style="color: #667eea; font-weight: 500;">üìû +40 700 123 456</span>
                            </td>
                            <td style="padding: 15px; color: #6b7280;">
                                <span style="background: #f3f4f6; padding: 6px 12px; border-radius: 8px; font-weight: 600; color: #667eea;">001</span>
                            </td>
                            <td style="padding: 15px;">
                                <span style="background: #dcfce7; color: #16a34a; padding: 6px 12px; border-radius: 8px; font-weight: 600; font-size: 13px;">Animator Principal</span>
                            </td>
                            <td style="padding: 15px; text-align: center;">
                                <button onclick="editTeamMember(this)" style="background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; margin-right: 8px; font-size: 13px;">‚úèÔ∏è EditeazƒÉ</button>
                                <button onclick="deleteTeamMember(this)" style="background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 13px;">üóëÔ∏è »òterge</button>
                            </td>
                        </tr>
                        
                        <tr style="border-bottom: 1px solid #f3f4f6;">
                            <td style="padding: 15px; color: #111827; font-weight: 500;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 16px;">
                                        M
                                    </div>
                                    <span>Maria Ionescu</span>
                                </div>
                            </td>
                            <td style="padding: 15px; color: #6b7280;">
                                <span style="color: #667eea; font-weight: 500;">üìû +40 700 234 567</span>
                            </td>
                            <td style="padding: 15px; color: #6b7280;">
                                <span style="background: #f3f4f6; padding: 6px 12px; border-radius: 8px; font-weight: 600; color: #667eea;">002</span>
                            </td>
                            <td style="padding: 15px;">
                                <span style="background: #dbeafe; color: #2563eb; padding: 6px 12px; border-radius: 8px; font-weight: 600; font-size: 13px;">»òofer</span>
                            </td>
                            <td style="padding: 15px; text-align: center;">
                                <button onclick="editTeamMember(this)" style="background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; margin-right: 8px; font-size: 13px;">‚úèÔ∏è EditeazƒÉ</button>
                                <button onclick="deleteTeamMember(this)" style="background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 13px;">üóëÔ∏è »òterge</button>
                            </td>
                        </tr>
                        
                        <tr>
                            <td style="padding: 15px; color: #111827; font-weight: 500;">
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #ec4899 0%, #be185d 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 16px;">
                                        I
                                    </div>
                                    <span>Ion Georgescu</span>
                                </div>
                            </td>
                            <td style="padding: 15px; color: #6b7280;">
                                <span style="color: #667eea; font-weight: 500;">üìû +40 700 345 678</span>
                            </td>
                            <td style="padding: 15px; color: #6b7280;">
                                <span style="background: #f3f4f6; padding: 6px 12px; border-radius: 8px; font-weight: 600; color: #667eea;">003</span>
                            </td>
                            <td style="padding: 15px;">
                                <span style="background: #fef3c7; color: #d97706; padding: 6px 12px; border-radius: 8px; font-weight: 600; font-size: 13px;">Asistent</span>
                            </td>
                            <td style="padding: 15px; text-align: center;">
                                <button onclick="editTeamMember(this)" style="background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; margin-right: 8px; font-size: 13px;">‚úèÔ∏è EditeazƒÉ</button>
                                <button onclick="deleteTeamMember(this)" style="background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 13px;">üóëÔ∏è »òterge</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Page: Inventar (EMPTY) -->
        <div class="page" id="inventar">
            <div class="page-header">
                <h2>üì¶ Inventar</h2>
                <p>Gestionare inventar »ôi materiale</p>
            </div>
            <!-- GOL - PregƒÉtit pentru viitor -->
        </div>
        
        <!-- Page: Piniata -->
        <div class="page" id="piniata">
            <div class="page-header">
                <h2>üéØ Piniata</h2>
                <p>Gestionare »ôi statistici pentru piniata</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">156</div>
                    <div class="stat-label">Total piniate folosite</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">23</div>
                    <div class="stat-label">√én stoc</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">12</div>
                    <div class="stat-label">Comandate</div>
                </div>
            </div>
            
            <div class="cards-grid">
                <div class="card">
                    <div class="card-title">üé® Tipuri de Piniate</div>
                    <div class="card-content">
                        <p><strong>Unicorn:</strong> 45 bucƒÉ»õi (29%)</p>
                        <p><strong>Super Eroi:</strong> 38 bucƒÉ»õi (24%)</p>
                        <p><strong>Prin»õ/Prin»õesƒÉ:</strong> 32 bucƒÉ»õi (21%)</p>
                        <p><strong>Animale:</strong> 28 bucƒÉ»õi (18%)</p>
                        <p><strong>Personalizate:</strong> 13 bucƒÉ»õi (8%)</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">üìä Statistici Lunare</div>
                    <div class="card-content">
                        <p><strong>Noiembrie:</strong> 18 piniate</p>
                        <p><strong>Octombrie:</strong> 22 piniate</p>
                        <p><strong>Septembrie:</strong> 20 piniate</p>
                        <p><strong>Medie lunarƒÉ:</strong> 20 piniate</p>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">üí∞ Costuri</div>
                    <div class="card-content">
                        <p><strong>Cost mediu:</strong> 150 lei / piniata</p>
                        <p><strong>Total investit:</strong> 23,400 lei</p>
                        <p><strong>Stoc curent:</strong> 3,450 lei</p>
                        <p><strong>ComandƒÉ nouƒÉ:</strong> 1,800 lei</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal AdaugƒÉ Membru EchipƒÉ -->
    <div id="addMemberModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; justify-content: center; align-items: center;">
        <div style="background: white; border-radius: 20px; padding: 30px; max-width: 500px; width: 90%; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0; color: #111827; font-size: 24px;">‚ûï AdaugƒÉ Membru EchipƒÉ</h2>
                <button onclick="closeAddMemberModal()" style="background: none; border: none; font-size: 28px; cursor: pointer; color: #6b7280; line-height: 1;">√ó</button>
            </div>
            
            <p style="color: #6b7280; margin-bottom: 25px;">CompleteazƒÉ datele noului membru din echipƒÉ</p>
            
            <!-- Form -->
            <form id="addMemberForm" onsubmit="submitNewMember(event)">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Nume complet *</label>
                    <input type="text" id="newMemberName" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: Andrei Popescu" required>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Cod trainer *</label>
                    <input type="text" id="newMemberCode" list="trainerCodes" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: A1, B5, Z50" required>
                    <p style="margin-top: 5px; font-size: 11px; color: #9ca3af; font-style: italic;">üí° Scrie cod (A1-Z50) - lista se filtreazƒÉ automat</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Telefon *</label>
                    <input type="tel" id="newMemberPhone" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="+40 700 123 456" required>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Email *</label>
                    <input type="email" id="newMemberEmail" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="email@exemplu.ro" required>
                    <p style="margin-top: 5px; font-size: 11px; color: #9ca3af; font-style: italic;">üìß Membrul va primi invita»õie pe acest email</p>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Rol</label>
                    <select id="newMemberRole" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;">
                        <option value="">SelecteazƒÉ rol...</option>
                        <option value="Animator Principal">Animator Principal</option>
                        <option value="Animator">Animator</option>
                        <option value="»òofer">»òofer</option>
                        <option value="Asistent">Asistent</option>
                        <option value="Fotograf">Fotograf</option>
                        <option value="Manager">Manager</option>
                    </select>
                </div>
                
                <div style="display: flex; gap: 10px; margin-top: 30px;">
                    <button type="button" onclick="closeAddMemberModal()" style="flex: 1; padding: 12px; background: #f3f4f6; color: #6b7280; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 15px;">
                        AnuleazƒÉ
                    </button>
                    <button type="submit" style="flex: 1; padding: 12px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 15px; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);">
                        ‚úÖ AdaugƒÉ Membru
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Modal Colaboratori -->
    <div id="colaboratoriModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; justify-content: center; align-items: center;">
        <div style="background: white; border-radius: 20px; padding: 30px; max-width: 600px; width: 90%; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0; color: #111827; font-size: 24px;">üë• √énregistreazƒÉ Colaboratori</h2>
                <button onclick="closeColaboratoriModal()" style="background: none; border: none; font-size: 28px; cursor: pointer; color: #6b7280; line-height: 1;">√ó</button>
            </div>
            
            <p style="color: #6b7280; margin-bottom: 25px;">AdaugƒÉ colaboratorii »ôi pre»õurile pentru acest eveniment</p>
            
            <!-- Add Colaborator Form -->
            <div style="background: #f9fafb; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                <div style="display: grid; gap: 15px;">
                    <div>
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Nume Colaborator</label>
                        <input type="text" id="colaboratorNume" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: Ion Popescu">
                    </div>
                    
                    <div>
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Telefon colaborator</label>
                        <input type="text" id="colaboratorTelefon" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: +40700123456">
                    </div>
                    
                    <div>
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Cod cine noteaza</label>
                        <input type="text" id="colaboratorCod" list="trainerCodes" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: A1, B5, Z50">
                        <p style="margin-top: 5px; font-size: 11px; color: #9ca3af; font-style: italic;">Scrie cod (A1-Z50)</p>
                    </div>
                    
                    <div>
                        <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Tip Colaborare</label>
                        <select id="colaboratorTip" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;">
                            <option value="">SelecteazƒÉ...</option>
                            <option value="Loc de joacƒÉ">Loc de joacƒÉ</option>
                        </select>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                        <div>
                            <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Tip Pre»õ</label>
                            <select id="colaboratorTipPret" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;">
                                <option value="eveniment">Pe Eveniment</option>
                                <option value="ora">Pe OrƒÉ</option>
                            </select>
                        </div>
                        
                        <div>
                            <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Pre»õ (RON)</label>
                            <input type="number" id="colaboratorPret" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: 500">
                        </div>
                        
                        <div>
                            <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 8px; font-weight: 500;">Pre»õ Transport (RON)</label>
                            <input type="number" id="colaboratorPretTransport" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 15px;" placeholder="Ex: 50">
                        </div>
                    </div>
                    
                    <button onclick="addColaborator()" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 12px 20px; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 15px; margin-top: 10px;">
                        ‚ûï AdaugƒÉ Colaborator
                    </button>
                </div>
            </div>
            
            <!-- Colaboratori List -->
            <div id="colaboratoriList" style="margin-top: 20px;">
                <h3 style="color: #111827; font-size: 18px; margin-bottom: 15px;">Colaboratori AdƒÉuga»õi:</h3>
                <div id="colaboratoriItems" style="display: flex; flex-direction: column; gap: 10px;">
                    <!-- Colaboratori items will be added here -->
                </div>
            </div>
            
            <!-- Close Button -->
            <button onclick="closeColaboratoriModal()" style="width: 100%; background: #6b7280; color: white; border: none; padding: 12px; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 15px; margin-top: 20px;">
                √énchide
            </button>
        </div>
    </div>

    <!-- AI Chat Modal -->
    <div id="aiChatModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; justify-content: center; align-items: center;">
        <div style="background: white; border-radius: 20px; width: 90%; max-width: 600px; height: 80vh; display: flex; flex-direction: column; box-shadow: 0 20px 60px rgba(0,0,0,0.3);">
            <!-- Header -->
            <div style="padding: 20px 25px; border-bottom: 2px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px 20px 0 0;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 32px;">ü§ñ</span>
                    <div>
                        <h2 style="margin: 0; color: white; font-size: 22px; font-weight: 700;">Super AI Assistant</h2>
                        <p style="margin: 0; color: rgba(255,255,255,0.9); font-size: 13px;">√éntreabƒÉ orice despre SuperParty</p>
                    </div>
                </div>
                <button onclick="closeAIChat()" style="background: rgba(255,255,255,0.2); border: none; color: white; font-size: 28px; cursor: pointer; line-height: 1; width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; transition: all 0.3s;">√ó</button>
            </div>
            
            <!-- Chat Messages -->
            <div id="chatMessages" style="flex: 1; padding: 20px; overflow-y: auto; background: #f9fafb;">
                <!-- Welcome message -->
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                        <span style="font-size: 20px;">ü§ñ</span>
                    </div>
                    <div style="background: white; padding: 12px 16px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); max-width: 80%;">
                        <p style="margin: 0; color: #111827; line-height: 1.5; font-weight: 600;">üëã Salut! Sunt Super AI!</p>
                        <p style="margin: 8px 0 0 0; color: #6b7280; line-height: 1.5;">√éntreabƒÉ-mƒÉ orice despre aplica»õie. RƒÉspund scurt »ôi la obiect! üòä</p>
                    </div>
                </div>
            </div>
            
            <!-- Input Area -->
            <div style="padding: 20px; border-top: 2px solid #e5e7eb; background: white; border-radius: 0 0 20px 20px;">
                <div style="display: flex; gap: 10px;">
                    <input 
                        type="text" 
                        id="chatInput" 
                        placeholder="Scrie mesajul tƒÉu aici..." 
                        style="flex: 1; padding: 12px 16px; border: 2px solid #e5e7eb; border-radius: 12px; font-size: 15px; outline: none; transition: all 0.3s;"
                        onkeypress="if(event.key === 'Enter') sendMessage()"
                        onfocus="this.style.borderColor='#667eea'"
                        onblur="this.style.borderColor='#e5e7eb'"
                    >
                    <button 
                        onclick="sendMessage()" 
                        id="sendButton"
                        style="padding: 12px 24px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 12px; font-weight: 600; cursor: pointer; font-size: 15px; transition: all 0.3s; white-space: nowrap;"
                        onmouseover="this.style.transform='scale(1.05)'"
                        onmouseout="this.style.transform='scale(1)'"
                    >
                        üì§ Trimite
                    </button>
                </div>
                <p style="margin: 8px 0 0 0; font-size: 11px; color: #9ca3af; text-align: center;">
                    üí° Powered by ChatGPT - RƒÉspunsurile sunt generate de inteligen»õƒÉ artificialƒÉ
                </p>
            </div>
        </div>
    </div>
    
    <!-- ADMIN PAGES -->
    
    <!-- Page: BifeazƒÉ Evenimente -->
    <div class="page" id="bifeaza-evenimente">
        <div class="page-header" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; padding: 30px; border-radius: 15px; margin-bottom: 30px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h2 style="margin: 0 0 10px 0;">‚úÖ BifeazƒÉ Evenimente</h2>
                    <p style="opacity: 0.9; margin: 0;">MarcheazƒÉ evenimentele ca finalizate</p>
                </div>
                <button onclick="logoutAdmin()" style="background: rgba(255, 255, 255, 0.2); color: white; border: 2px solid white; padding: 12px 24px; border-radius: 12px; font-weight: 700; cursor: pointer; font-size: 15px; transition: all 0.3s; display: flex; align-items: center; gap: 10px;" onmouseover="this.style.background='rgba(255, 255, 255, 0.3)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.2)'">
                    <span style="font-size: 20px;">üö™</span>
                    <span>Ie»ôire Admin</span>
                </button>
            </div>
        </div>
        
        <div style="background: #fee2e2; border-left: 4px solid #ef4444; padding: 20px; border-radius: 10px; margin-bottom: 25px;">
            <div style="font-weight: 700; color: #991b1b; margin-bottom: 5px;">üîê MOD ADMIN ACTIV</div>
            <div style="color: #7f1d1d; font-size: 14px;">Pagina pentru bifarea evenimentelor este √Æn construc»õie</div>
        </div>
        
        <div style="background: white; border-radius: 15px; padding: 40px; box-shadow: 0 2px 15px rgba(0,0,0,0.08); text-align: center;">
            <div style="font-size: 64px; margin-bottom: 20px;">üöß</div>
            <h3 style="color: #1f2937; margin-bottom: 15px;">Func»õionalitate √Æn Dezvoltare</h3>
            <p style="color: #6b7280; font-size: 16px; max-width: 500px; margin: 0 auto;">
                Pagina pentru bifarea »ôi gestionarea evenimentelor va fi adƒÉugatƒÉ √Æn cur√¢nd.
            </p>
        </div>
    </div>

    </div>
    <!-- End Main Content -->

    <!-- Floating AI Chat Button - DEZACTIVAT TEMPORAR
    <button class="ai-chat-button" onclick="openAIChat()">
        <div class="ai-chat-pulse"></div>
        <span class="ai-chat-icon">ü§ñ</span>
        <span>√éntreabƒÉ Super AI</span>
    </button>
    -->
    
    <!-- Buton Admin Vizibil cu 10 Clickuri Secrete -->
    <button id="secretAdminBtn" style="position: fixed; top: 90px; left: 20px; z-index: 1000; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; border: none; border-radius: 12px; width: 60px; height: 60px; font-size: 28px; cursor: pointer; box-shadow: 0 6px 25px rgba(239, 68, 68, 0.4); transition: all 0.3s; display: flex; align-items: center; justify-content: center;" onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 8px 30px rgba(239, 68, 68, 0.6)';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 6px 25px rgba(239, 68, 68, 0.4)';">
        üîê
    </button>

    <script>
        // ============================================
        // SUPABASE CONFIGURATION
        // ============================================
        const SUPABASE_URL = 'https://llznggdiaknxtqglpeot.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxsem5nZ2RpYWtueHRxZ2xwZW90Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI2Nzc4NzksImV4cCI6MjA3ODI1Mzg3OX0.W1AxyLapjz3V8jwBcxUQAUhc3buPya1jb-OdvwKltf8';
        
        let supabase;
        
        // Initialize Supabase Client
        document.addEventListener('DOMContentLoaded', () => {
            try {
                supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                console.log('‚úÖ Supabase connected successfully!');
                console.log('üìä Database ready for: team_members, evenimente, colaboratori');
            } catch (error) {
                console.error('‚ùå Supabase initialization error:', error);
            }
        });
        
        // ============================================
        // HELPER FUNCTIONS
        // ============================================
        
        // Generate trainer codes (A1-A50, B1-B50, ..., Z1-Z50)
        function generateTrainerCodes() {
            const codes = [];
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            
            for (let i = 0; i < letters.length; i++) {
                const letter = letters[i];
                for (let num = 1; num <= 50; num++) {
                    codes.push(letter + num);
                }
            }
            
            return codes;
        }
        
        // Create datalist with all trainer codes
        function createTrainerCodesDatalist() {
            // Remove existing datalist if any
            const existingDatalist = document.getElementById('trainerCodes');
            if (existingDatalist) {
                existingDatalist.remove();
            }
            
            // Create new datalist
            const datalist = document.createElement('datalist');
            datalist.id = 'trainerCodes';
            
            const codes = generateTrainerCodes();
            codes.forEach(code => {
                const option = document.createElement('option');
                option.value = code;
                datalist.appendChild(option);
            });
            
            document.body.appendChild(datalist);
        }
        
        // Generate event number on page load - START FROM 1 and INCREMENT
        document.addEventListener('DOMContentLoaded', function() {
            // Create trainer codes datalist
            createTrainerCodesDatalist();
            // Get last event number from localStorage, or start from 1
            let lastEventNumber = localStorage.getItem('lastEventNumber');
            let eventNumber;
            
            if (lastEventNumber) {
                eventNumber = parseInt(lastEventNumber) + 1;
            } else {
                eventNumber = 1; // Start from 1
            }
            
            // Save and display
            localStorage.setItem('lastEventNumber', eventNumber);
            const eventNumberEl = document.getElementById('numarEveniment');
            if (eventNumberEl) {
                eventNumberEl.textContent = eventNumber;
            }
            
            // Add date format validation for BOTH date inputs
            const dateInputs = document.querySelectorAll('input[type="text"][pattern*="\\\\d{2}"]');
            dateInputs.forEach(dateInput => {
                dateInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, ''); // Remove non-digits
                    
                    if (value.length >= 2) {
                        value = value.substring(0, 2) + '/' + value.substring(2);
                    }
                    if (value.length >= 5) {
                        value = value.substring(0, 5) + '/' + value.substring(5);
                    }
                    if (value.length > 10) {
                        value = value.substring(0, 10);
                    }
                    
                    e.target.value = value;
                });
                
                // Validate date format on blur
                dateInput.addEventListener('blur', function(e) {
                    const datePattern = /^(\d{2})\/(\d{2})\/(\d{4})$/;
                    const match = e.target.value.match(datePattern);
                    
                    if (match && e.target.value) {
                        const day = parseInt(match[1]);
                        const month = parseInt(match[2]);
                        const year = parseInt(match[3]);
                        
                        if (day < 1 || day > 31 || month < 1 || month > 12 || year < 2024) {
                            alert('Data invalidƒÉ! Folose»ôte formatul: zi/lunƒÉ/an (ex: 15/11/2025)');
                            e.target.value = '';
                        }
                    }
                });
            });
        });
        
        // Handle form submit
        function handleFormSubmit(event) {
            event.preventDefault();
            
            // Get form data
            const formData = new FormData(event.target);
            const data = {};
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            // Get event code
            const eventCode = document.getElementById('numarEveniment').textContent;
            data.codEveniment = eventCode;
            
            console.log('üìù Eveniment salvat:', data);
            
            // Show success message
            alert('‚úÖ Eveniment salvat cu succes!\n\nCod eveniment: ' + eventCode + '\n\nAcest cod va fi folosit pentru dublarea evenimentelor √Æn func»õie de roluri.');
            
            // Reset form
            event.target.reset();
            
            // Generate NEXT sequential event number
            let lastEventNumber = localStorage.getItem('lastEventNumber');
            let newEventNumber = parseInt(lastEventNumber) + 1;
            localStorage.setItem('lastEventNumber', newEventNumber);
            document.getElementById('numarEveniment').textContent = newEventNumber;
        }
        
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Remove active from all menu items
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Add active to clicked menu item
            event.currentTarget.classList.add('active');
            
            // Load data for specific pages
            if (pageId === 'cu-factura') {
                loadEvenimenteCuFactura();
            }
            
            // Close sidebar on mobile
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('open');
            }
        }
        
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open');
        }
        
        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768) {
                const sidebar = document.getElementById('sidebar');
                const toggle = document.querySelector('.mobile-menu-toggle');
                
                if (!sidebar.contains(event.target) && !toggle.contains(event.target)) {
                    sidebar.classList.remove('open');
                }
            }
        });
        
        // Open AI Chat function
        // AI Chat Functions
        let chatHistory = [];
        
        function openAIChat() {
            document.getElementById('aiChatModal').style.display = 'flex';
            // Focus pe input
            setTimeout(() => {
                document.getElementById('chatInput').focus();
            }, 100);
        }
        
        function closeAIChat() {
            document.getElementById('aiChatModal').style.display = 'none';
        }
        
        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Clear input
            input.value = '';
            
            // Add user message to chat
            addMessageToChat(message, 'user');
            
            // Show loading indicator
            const loadingId = addLoadingMessage();
            
            // Disable send button
            const sendButton = document.getElementById('sendButton');
            sendButton.disabled = true;
            sendButton.textContent = '‚è≥ A»ôteaptƒÉ...';
            
            try {
                // Call OpenAI ChatGPT API
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer 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'
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        max_tokens: 300,
                        messages: [
                            {
                                role: 'system',
                                content: `E»ôti Super AI, asistentul virtual al aplica»õiei SuperParty - o platformƒÉ de management pentru evenimente petreceri copii. 

Aplica»õia are urmƒÉtoarele func»õionalitƒÉ»õi:
- NoteazƒÉ Evenimente: formular complet cu 29 c√¢mpuri pentru detalii eveniment
- AI Photo Scan: scaneazƒÉ formulare »ôi completeazƒÉ automat datele cu Claude AI
- √énregistreazƒÉ Colaboratori: gestionare colaboratori (locuri de joacƒÉ, etc) »ôi costuri
- Echipa: management membri echipƒÉ cu coduri trainer (A1-Z50)
- Cod Unic Eveniment: generare automatƒÉ cod unic pentru fiecare eveniment
- Mobile Responsive: optimizat pentru telefon »ôi desktop

IMPORTANT - REGULI RƒÇSPUNS:
- RƒÉspunde SCURT »ôi DIRECT la √Æntrebare
- Maximum 3-4 propozi»õii
- FƒÉrƒÉ introduceri lungi sau explica»õii detaliate
- DacƒÉ √Æntrebarea e simplƒÉ ‚Üí rƒÉspuns de 1-2 propozi»õii
- Folose»ôte bullet points doar dacƒÉ e necesar
- Ton prietenos dar CONCIS
- √én limba rom√¢nƒÉ

Exemplu GRE»òIT: "Bine ai venit! MƒÉ bucur sƒÉ te ajut! Hai sƒÉ √Æ»õi explic √Æn detaliu cum func»õioneazƒÉ..."
Exemplu CORECT: "Simplu: Click 'Echipa' ‚Üí 'AdaugƒÉ Membru' ‚Üí completezi formularul ‚Üí Gata!"

DacƒÉ nu »ôtii ceva, spune direct "Nu am informa»õii despre asta √ÆncƒÉ."`
                            },
                            ...chatHistory,
                            { role: 'user', content: message }
                        ]
                    })
                });
                
                const data = await response.json();
                
                // Remove loading
                removeLoadingMessage(loadingId);
                
                // Add AI response
                const aiMessage = data.choices[0].message.content;
                addMessageToChat(aiMessage, 'assistant');
                
                // Update history
                chatHistory.push({ role: 'user', content: message });
                chatHistory.push({ role: 'assistant', content: aiMessage });
                
                // Keep only last 10 messages (5 pairs) to avoid token limits
                if (chatHistory.length > 10) {
                    chatHistory = chatHistory.slice(-10);
                }
                
            } catch (error) {
                console.error('AI Chat Error:', error);
                removeLoadingMessage(loadingId);
                
                // Add error message
                addMessageToChat(
                    '‚ùå Oops! Am √Ænt√¢mpinat o problemƒÉ. Te rog √ÆncearcƒÉ din nou sau verificƒÉ conexiunea la internet.\n\nüí° DacƒÉ problema persistƒÉ, verificƒÉ cƒÉ API key-ul ChatGPT este configurat corect.',
                    'assistant',
                    true
                );
            } finally {
                // Re-enable send button
                sendButton.disabled = false;
                sendButton.textContent = 'üì§ Trimite';
                input.focus();
            }
        }
        
        function addMessageToChat(message, role, isError = false) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.style.cssText = 'display: flex; gap: 10px; margin-bottom: 15px; animation: fadeIn 0.3s ease;';
            
            if (role === 'user') {
                // User message (right aligned)
                messageDiv.style.justifyContent = 'flex-end';
                messageDiv.innerHTML = `
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 16px; border-radius: 12px; max-width: 80%; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);">
                        <p style="margin: 0; line-height: 1.5; white-space: pre-wrap;">${escapeHtml(message)}</p>
                    </div>
                    <div style="width: 40px; height: 40px; border-radius: 50%; background: #667eea; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                        <span style="font-size: 20px;">üë§</span>
                    </div>
                `;
            } else {
                // AI message (left aligned)
                const bgColor = isError ? '#fee2e2' : 'white';
                const textColor = isError ? '#dc2626' : '#111827';
                
                messageDiv.innerHTML = `
                    <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                        <span style="font-size: 20px;">ü§ñ</span>
                    </div>
                    <div style="background: ${bgColor}; padding: 12px 16px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); max-width: 80%;">
                        <p style="margin: 0; color: ${textColor}; line-height: 1.5; white-space: pre-wrap;">${escapeHtml(message)}</p>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            
            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function addLoadingMessage() {
            const chatMessages = document.getElementById('chatMessages');
            const loadingDiv = document.createElement('div');
            const loadingId = 'loading-' + Date.now();
            loadingDiv.id = loadingId;
            loadingDiv.style.cssText = 'display: flex; gap: 10px; margin-bottom: 15px;';
            loadingDiv.innerHTML = `
                <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                    <span style="font-size: 20px;">ü§ñ</span>
                </div>
                <div style="background: white; padding: 12px 16px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <div style="display: flex; gap: 4px; align-items: center;">
                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #667eea; animation: bounce 1s infinite;"></div>
                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #667eea; animation: bounce 1s infinite 0.2s;"></div>
                        <div style="width: 8px; height: 8px; border-radius: 50%; background: #667eea; animation: bounce 1s infinite 0.4s;"></div>
                    </div>
                </div>
            `;
            chatMessages.appendChild(loadingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            return loadingId;
        }
        
        function removeLoadingMessage(loadingId) {
            const loadingDiv = document.getElementById(loadingId);
            if (loadingDiv) {
                loadingDiv.remove();
            }
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('aiChatModal');
            if (event.target === modal) {
                closeAIChat();
            }
        });
        
        // Colaboratori Management Functions
        let colaboratoriData = [];
        
        function openColaboratoriModal() {
            document.getElementById('colaboratoriModal').style.display = 'flex';
            renderColaboratori();
        }
        
        function closeColaboratoriModal() {
            document.getElementById('colaboratoriModal').style.display = 'none';
        }
        
        function addColaborator() {
            const nume = document.getElementById('colaboratorNume').value;
            const telefon = document.getElementById('colaboratorTelefon').value;
            const cod = document.getElementById('colaboratorCod').value;
            const tip = document.getElementById('colaboratorTip').value;
            const tipPret = document.getElementById('colaboratorTipPret').value;
            const pret = document.getElementById('colaboratorPret').value;
            const pretTransport = document.getElementById('colaboratorPretTransport').value || 0;
            
            if (!nume || !tip || !pret) {
                alert('‚ö†Ô∏è Te rog completeazƒÉ toate c√¢mpurile obligatorii!');
                return;
            }
            
            const colaborator = {
                id: Date.now(),
                nume: nume,
                telefon: telefon,
                cod: cod,
                tip: tip,
                tipPret: tipPret,
                pret: parseFloat(pret),
                pretTransport: parseFloat(pretTransport)
            };
            
            colaboratoriData.push(colaborator);
            renderColaboratori();
            
            // Clear form
            document.getElementById('colaboratorNume').value = '';
            document.getElementById('colaboratorTelefon').value = '';
            document.getElementById('colaboratorCod').value = '';
            document.getElementById('colaboratorTip').value = '';
            document.getElementById('colaboratorPret').value = '';
            document.getElementById('colaboratorPretTransport').value = '';
            
            alert('‚úÖ Colaborator adƒÉugat!');
        }
        
        function deleteColaborator(id) {
            if (confirm('Sigur vrei sƒÉ »ôtergi acest colaborator?')) {
                colaboratoriData = colaboratoriData.filter(c => c.id !== id);
                renderColaboratori();
                alert('‚úÖ Colaborator »ôters!');
            }
        }
        
        function renderColaboratori() {
            const container = document.getElementById('colaboratoriItems');
            
            if (colaboratoriData.length === 0) {
                container.innerHTML = '<p style="color: #9ca3af; text-align: center; padding: 20px;">Niciun colaborator adƒÉugat √ÆncƒÉ</p>';
                return;
            }
            
            const tipColors = {
                'Loc de joacƒÉ': 'background: #dcfce7; color: #16a34a;'
            };
            
            let html = '';
            let totalCost = 0;
            let totalTransport = 0;
            
            colaboratoriData.forEach(col => {
                const colorStyle = tipColors[col.tip] || 'background: #f3f4f6; color: #6b7280;';
                const costTotal = col.pret + (col.pretTransport || 0);
                totalCost += col.pret;
                totalTransport += (col.pretTransport || 0);
                
                html += `
                    <div style="background: white; border: 2px solid #e5e7eb; border-radius: 12px; padding: 15px; display: flex; justify-content: space-between; align-items: center;">
                        <div style="flex: 1;">
                            <div style="font-weight: 600; color: #111827; margin-bottom: 5px;">${col.nume}</div>
                            ${col.telefon ? `<div style="color: #6b7280; font-size: 13px; margin-bottom: 5px;">üìû ${col.telefon}</div>` : ''}
                            ${col.cod ? `<div style="color: #6b7280; font-size: 13px; margin-bottom: 5px;">üè∑Ô∏è Cod: ${col.cod}</div>` : ''}
                            <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap;">
                                <span style="${colorStyle} padding: 4px 10px; border-radius: 6px; font-size: 13px; font-weight: 600;">${col.tip}</span>
                                <span style="background: #f3f4f6; color: #667eea; padding: 4px 10px; border-radius: 6px; font-size: 13px; font-weight: 600;">${col.pret} RON / ${col.tipPret === 'ora' ? 'OrƒÉ' : 'Eveniment'}</span>
                                ${col.pretTransport > 0 ? `<span style="background: #fef3c7; color: #d97706; padding: 4px 10px; border-radius: 6px; font-size: 13px; font-weight: 600;">üöó Transport: ${col.pretTransport} RON</span>` : ''}
                            </div>
                        </div>
                        <button onclick="deleteColaborator(${col.id})" style="background: #fee2e2; color: #dc2626; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: 600;">
                            üóëÔ∏è »òterge
                        </button>
                    </div>
                `;
            });
            
            const grandTotal = totalCost + totalTransport;
            
            html += `
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px; padding: 15px; margin-top: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; opacity: 0.9; font-size: 14px;">
                        <span>Cost Servicii:</span>
                        <span style="font-weight: 600;">${totalCost} RON</span>
                    </div>
                    ${totalTransport > 0 ? `
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px; opacity: 0.9; font-size: 14px;">
                        <span>Cost Transport:</span>
                        <span style="font-weight: 600;">${totalTransport} RON</span>
                    </div>
                    ` : ''}
                    <div style="border-top: 2px solid rgba(255,255,255,0.3); padding-top: 10px; margin-top: 10px;">
                        <div style="text-align: center;">
                            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 5px;">Cost Total</div>
                            <div style="font-size: 28px; font-weight: 800;">${grandTotal} RON</div>
                        </div>
                    </div>
                </div>
            `;
            
            container.innerHTML = html;
        }
        
        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('colaboratoriModal');
            if (event.target === modal) {
                closeColaboratoriModal();
            }
        });
        
        // AI Photo Processing Function
        async function processPhotoWithAI(input) {
            const file = input.files[0];
            if (!file) return;
            
            // Show preview
            const preview = document.getElementById('photoPreview');
            const previewImage = document.getElementById('previewImage');
            preview.style.display = 'block';
            
            // Display image
            const reader = new FileReader();
            reader.onload = async function(e) {
                previewImage.src = e.target.result;
                
                // Convert to base64
                const base64Image = e.target.result.split(',')[1];
                
                // Call Claude AI API
                try {
                    const response = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            model: 'claude-sonnet-4-20250514',
                            max_tokens: 2000,
                            messages: [{
                                role: 'user',
                                content: [
                                    {
                                        type: 'image',
                                        source: {
                                            type: 'base64',
                                            media_type: file.type,
                                            data: base64Image
                                        }
                                    },
                                    {
                                        type: 'text',
                                        text: `AnalizeazƒÉ aceastƒÉ imagine »ôi extrage TOATE informa»õiile pentru un formular de eveniment petrecere copii. RƒÉspunde DOAR cu un obiect JSON valid, fƒÉrƒÉ text suplimentar. C√¢mpurile sunt:

{
  "dataFormular": "zi/luna/an (ex: 09/11/2025)",
  "nume": "nume client",
  "prenume": "prenume client", 
  "telefon": "telefon cu +40",
  "sursa": "de unde a venit (Facebook/Instagram/Recomandare/Site/TikTok/Alte)",
  "personaj": "personaj petrecere",
  "dataPetrecere": "zi/luna/an",
  "oraPetrecere": "HH:MM (24h)",
  "durata": "numar minute (ex: 180)",
  "varsta": "numar ani",
  "numarCopii": "numar",
  "adresa": "adresa completa",
  "detaliiAdresa": "detalii extra",
  "sofer": "DA/NU",
  "avans": "suma RON",
  "rest": "suma RON", 
  "total": "suma RON",
  "observatii": "text liber"
}

IMPORTANT: RƒÉspunde DOAR cu JSON-ul, fƒÉrƒÉ explica»õii sau text suplimentar. DacƒÉ un c√¢mp nu e vizibil, pune null.`
                                    }
                                ]
                            }]
                        })
                    });
                    
                    const data = await response.json();
                    let jsonText = data.content[0].text;
                    
                    // Clean JSON response
                    jsonText = jsonText.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();
                    
                    const extractedData = JSON.parse(jsonText);
                    
                    // Fill form fields
                    fillFormFromAI(extractedData);
                    
                    // Hide preview after 2 seconds
                    setTimeout(() => {
                        preview.style.display = 'none';
                        alert('‚úÖ Formular completat automat cu date din pozƒÉ!');
                    }, 2000);
                    
                } catch (error) {
                    console.error('AI Processing Error:', error);
                    alert('‚ùå Eroare la procesarea imaginii. √éncearcƒÉ din nou sau completeazƒÉ manual.');
                    preview.style.display = 'none';
                }
            };
            
            reader.readAsDataURL(file);
        }
        
        function fillFormFromAI(data) {
            // Helper function to safely set value
            const setValue = (name, value) => {
                if (value && value !== null && value !== 'null') {
                    const element = document.querySelector(`[name="${name}"]`);
                    if (element) {
                        element.value = value;
                        // Trigger change event for any listeners
                        element.dispatchEvent(new Event('change', { bubbles: true }));
                    }
                }
            };
            
            // Fill all fields
            setValue('dataFormular', data.dataFormular);
            setValue('nume', data.nume);
            setValue('prenume', data.prenume);
            setValue('telefon', data.telefon);
            setValue('sursa', data.sursa);
            setValue('personaj', data.personaj);
            setValue('dataPetrecere', data.dataPetrecere);
            setValue('oraPetrecere', data.oraPetrecere);
            setValue('durata', data.durata);
            setValue('varsta', data.varsta);
            setValue('numarCopii', data.numarCopii);
            setValue('adresa', data.adresa);
            setValue('detaliiAdresa', data.detaliiAdresa);
            setValue('sofer', data.sofer);
            setValue('avans', data.avans);
            setValue('rest', data.rest);
            setValue('total', data.total);
            setValue('observatii', data.observatii);
            
            console.log('‚úÖ Form filled with AI data:', data);
        }
        
        // Team Management Functions
        function addTeamMember() {
            document.getElementById('addMemberModal').style.display = 'flex';
        }
        
        function closeAddMemberModal() {
            document.getElementById('addMemberModal').style.display = 'none';
            document.getElementById('addMemberForm').reset();
        }
        
        async function submitNewMember(event) {
            event.preventDefault();
            
            const nume = document.getElementById('newMemberName').value;
            const cod = document.getElementById('newMemberCode').value;
            const telefon = document.getElementById('newMemberPhone').value;
            const email = document.getElementById('newMemberEmail').value;
            const rol = document.getElementById('newMemberRole').value || 'Membru';
            
            // Validate code format
            const codePattern = /^[A-Z]\d{1,2}$/;
            if (!codePattern.test(cod)) {
                alert('‚ùå Cod invalid! Folose»ôte format: A1-Z50 (literƒÉ mare + numƒÉr 1-50)');
                return;
            }
            
            // Validate number range
            const letter = cod.charAt(0);
            const number = parseInt(cod.substring(1));
            if (number < 1 || number > 50) {
                alert('‚ùå NumƒÉrul trebuie sƒÉ fie √Æntre 1 »ôi 50!');
                return;
            }
            
            const colors = [
                'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',
                'linear-gradient(135deg, #ec4899 0%, #be185d 100%)',
                'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                'linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)'
            ];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            
            try {
                // Save to Supabase
                const { data, error } = await supabase
                    .from('team_members')
                    .insert([{
                        nume: nume,
                        cod_trainer: cod,
                        telefon: telefon,
                        email: email,
                        rol: rol,
                        status: 'invited',
                        avatar_color: randomColor
                    }])
                    .select();
                
                if (error) {
                    console.error('Supabase error:', error);
                    alert('‚ùå Eroare la salvare: ' + error.message);
                    return;
                }
                
                console.log('‚úÖ Membru salvat √Æn Supabase:', data);
                
                // Add to table UI
                addMemberToTable(data[0], randomColor);
                
                // Close modal and reset form
                closeAddMemberModal();
                
                // Show success message
                alert(`‚úÖ Membru adƒÉugat cu succes!\n\nüìß Invita»õie va fi trimisƒÉ la: ${email}\n\nMembrul este acum √Æn baza de date!`);
                
            } catch (error) {
                console.error('Error:', error);
                alert('‚ùå Eroare: ' + error.message);
            }
        }
        
        function addMemberToTable(memberData, avatarColor) {
            const tableBody = document.getElementById('teamTableBody');
            const initial = memberData.nume.charAt(0).toUpperCase();
            
            const rolColors = {
                'animator': 'background: #dcfce7; color: #16a34a;',
                'sofer': 'background: #dbeafe; color: #2563eb;',
                'asistent': 'background: #fef3c7; color: #d97706;',
                'fotograf': 'background: #fce7f3; color: #db2777;',
                'manager': 'background: #f3e8ff; color: #7c3aed;',
                'default': 'background: #f3f4f6; color: #6b7280;'
            };
            
            const rolLower = memberData.rol ? memberData.rol.toLowerCase() : '';
            let rolStyle = rolColors.default;
            if (rolLower.includes('animator')) rolStyle = rolColors.animator;
            else if (rolLower.includes('sofer') || rolLower.includes('»ôofer')) rolStyle = rolColors.sofer;
            else if (rolLower.includes('asistent')) rolStyle = rolColors.asistent;
            else if (rolLower.includes('fotograf')) rolStyle = rolColors.fotograf;
            else if (rolLower.includes('manager')) rolStyle = rolColors.manager;
            
            const newRow = document.createElement('tr');
            newRow.style.borderBottom = '1px solid #f3f4f6';
            newRow.setAttribute('data-id', memberData.id);
            newRow.setAttribute('data-email', memberData.email);
            newRow.innerHTML = `
                <td style="padding: 15px; color: #111827; font-weight: 500;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <div style="width: 40px; height: 40px; border-radius: 50%; background: ${avatarColor}; display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 16px;">
                            ${initial}
                        </div>
                        <span>${memberData.nume}</span>
                    </div>
                </td>
                <td style="padding: 15px; color: #6b7280;">
                    <span style="color: #667eea; font-weight: 500;">üìû ${memberData.telefon}</span>
                </td>
                <td style="padding: 15px; color: #6b7280;">
                    <span style="background: #f3f4f6; padding: 6px 12px; border-radius: 8px; font-weight: 600; color: #667eea;">${memberData.cod_trainer}</span>
                </td>
                <td style="padding: 15px;">
                    <span style="${rolStyle} padding: 6px 12px; border-radius: 8px; font-weight: 600; font-size: 13px;">${memberData.rol || 'Membru'}</span>
                </td>
                <td style="padding: 15px; text-align: center;">
                    <button onclick="editTeamMember(this)" style="background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; margin-right: 8px; font-size: 13px;">‚úèÔ∏è EditeazƒÉ</button>
                    <button onclick="deleteTeamMember(this)" style="background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 13px;">üóëÔ∏è »òterge</button>
                </td>
            `;
            
            tableBody.appendChild(newRow);
        }
        
        function editTeamMember(button) {
            const row = button.closest('tr');
            const cells = row.querySelectorAll('td');
            
            const numeSpan = cells[0].querySelector('span');
            const telefonSpan = cells[1].querySelector('span');
            const codSpan = cells[2].querySelector('span');
            const rolSpan = cells[3].querySelector('span');
            
            const newNume = prompt('Nume nou:', numeSpan.textContent);
            if (newNume) numeSpan.textContent = newNume;
            
            const currentTelefon = telefonSpan.textContent.replace('üìû ', '');
            const newTelefon = prompt('Telefon nou:', currentTelefon);
            if (newTelefon) telefonSpan.innerHTML = 'üìû ' + newTelefon;
            
            const newCod = prompt('Cod nou:', codSpan.textContent);
            if (newCod) codSpan.textContent = newCod;
            
            const newRol = prompt('Rol nou:', rolSpan.textContent);
            if (newRol) rolSpan.textContent = newRol;
            
            alert('‚úÖ Membru actualizat!');
        }
        
        function deleteTeamMember(button) {
            if (confirm('Sigur vrei sƒÉ »ôtergi acest membru?')) {
                const row = button.closest('tr');
                row.remove();
                alert('‚úÖ Membru »ôters!');
            }
        }
        
        // Func»õie pentru √ÆncƒÉrcarea evenimentelor cu facturƒÉ
        async function loadEvenimenteCuFactura() {
            try {
                // Interogare Supabase pentru evenimente cu metodƒÉ platƒÉ = FacturƒÉ
                const { data, error } = await supabase
                    .from('evenimente')
                    .select('*')
                    .eq('metoda_plata', 'FacturƒÉ')
                    .order('data_petrecere', { ascending: false });
                
                if (error) {
                    console.error('Eroare la √ÆncƒÉrcarea evenimentelor cu facturƒÉ:', error);
                    return;
                }
                
                // CalculeazƒÉ statistici
                const totalFacturi = data.length;
                const sumaFacturi = data.reduce((sum, evt) => sum + (parseFloat(evt.total) || 0), 0);
                
                // ActualizeazƒÉ statisticile
                document.getElementById('totalFacturi').textContent = totalFacturi;
                document.getElementById('sumaFacturi').textContent = sumaFacturi.toFixed(2) + ' RON';
                
                // GenereazƒÉ lista evenimentelor
                const listaFacturi = document.getElementById('listaFacturi');
                
                if (data.length === 0) {
                    listaFacturi.innerHTML = `
                        <p style="text-align: center; color: #6b7280; padding: 40px 0;">
                            üìÑ Nu existƒÉ evenimente cu facturƒÉ √ÆncƒÉ
                        </p>
                    `;
                    return;
                }
                
                // CreazƒÉ HTML pentru fiecare eveniment
                let html = '<div style="display: flex; flex-direction: column; gap: 15px;">';
                
                data.forEach(eveniment => {
                    const dataFormatata = eveniment.data_petrecere ? new Date(eveniment.data_petrecere).toLocaleDateString('ro-RO') : 'N/A';
                    const oraFormatata = eveniment.ora_petrecere || 'N/A';
                    
                    html += `
                        <div style="border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px; background: #f9fafb; transition: all 0.3s; cursor: pointer;" onmouseover="this.style.borderColor='#667eea'" onmouseout="this.style.borderColor='#e5e7eb'">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                                <div>
                                    <div style="font-size: 18px; font-weight: 700; color: #111827; margin-bottom: 5px;">
                                        üéâ ${eveniment.personaj || 'Eveniment'}
                                    </div>
                                    <div style="color: #6b7280; font-size: 14px;">
                                        üë§ ${eveniment.nume || ''} ${eveniment.prenume || ''} | üìû ${eveniment.telefon || 'N/A'}
                                    </div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 8px 16px; border-radius: 20px; font-weight: 700; font-size: 16px;">
                                        ${parseFloat(eveniment.total || 0).toFixed(2)} RON
                                    </div>
                                    <div style="margin-top: 5px;">
                                        <span style="background: #dcfce7; color: #16a34a; padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: 600;">
                                            üßæ FacturƒÉ
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-top: 15px; padding-top: 15px; border-top: 1px solid #e5e7eb;">
                                <div>
                                    <span style="color: #6b7280; font-size: 13px;">üìÖ Data:</span>
                                    <span style="color: #111827; font-weight: 600; margin-left: 5px;">${dataFormatata}</span>
                                </div>
                                <div>
                                    <span style="color: #6b7280; font-size: 13px;">‚è∞ Ora:</span>
                                    <span style="color: #111827; font-weight: 600; margin-left: 5px;">${oraFormatata}</span>
                                </div>
                                <div>
                                    <span style="color: #6b7280; font-size: 13px;">üë∂ V√¢rstƒÉ:</span>
                                    <span style="color: #111827; font-weight: 600; margin-left: 5px;">${eveniment.varsta || 'N/A'} ani</span>
                                </div>
                                <div>
                                    <span style="color: #6b7280; font-size: 13px;">üë• Copii:</span>
                                    <span style="color: #111827; font-weight: 600; margin-left: 5px;">${eveniment.numar_copii || 'N/A'}</span>
                                </div>
                            </div>
                            
                            ${eveniment.adresa ? `
                                <div style="margin-top: 12px; padding: 10px; background: white; border-radius: 8px;">
                                    <span style="color: #6b7280; font-size: 13px;">üìç AdresƒÉ:</span>
                                    <span style="color: #111827; font-weight: 500; margin-left: 5px;">${eveniment.adresa}</span>
                                </div>
                            ` : ''}
                            
                            ${eveniment.observatii ? `
                                <div style="margin-top: 12px; padding: 10px; background: #fef3c7; border-radius: 8px; border-left: 4px solid #f59e0b;">
                                    <span style="color: #92400e; font-size: 13px; font-weight: 600;">üìù Observa»õii:</span>
                                    <p style="color: #78350f; margin: 5px 0 0 0; font-size: 14px;">${eveniment.observatii}</p>
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
                
                html += '</div>';
                listaFacturi.innerHTML = html;
                
                console.log('‚úÖ √éncƒÉrcate', totalFacturi, 'evenimente cu facturƒÉ');
                
            } catch (error) {
                console.error('Eroare la √ÆncƒÉrcarea evenimentelor cu facturƒÉ:', error);
                alert('‚ùå Eroare la √ÆncƒÉrcarea datelor: ' + error.message);
            }
        }
        
        // ============================================
        // ADMIN MODE FUNCTIONS
        // ============================================
        
        let isAdminMode = false;
        const ADMIN_PASSWORD = 'Andrei209512!0728242214';
        
        function checkAdminAccess() {
            if (isAdminMode) {
                alert('‚úÖ E»ôti deja √Æn modul admin!');
                return;
            }
            
            const password = prompt('üîê Introdu parola de admin:');
            
            if (password === null) return; // User cancelled
            
            if (password === ADMIN_PASSWORD) {
                isAdminMode = true;
                
                // ASCUNDE meniul normal
                document.getElementById('mainMenu').style.display = 'none';
                
                // ARATƒÇ meniul admin simplificat
                document.getElementById('adminMenu').style.display = 'block';
                
                alert('‚úÖ Bine ai venit √Æn modul ADMIN!\n\nAi acces complet la toate func»õiile administrative.');
                
                // MarcheazƒÉ header-ul ca admin
                const header = document.querySelector('.sidebar-header');
                header.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
                
                // AdaugƒÉ badge admin
                const byAi = document.querySelector('.by-ai');
                if (!document.getElementById('adminBadge')) {
                    const adminBadge = document.createElement('div');
                    adminBadge.id = 'adminBadge';
                    adminBadge.style.cssText = 'background: #fef2f2; color: #ef4444; padding: 5px 12px; border-radius: 20px; font-size: 11px; font-weight: 700; margin-top: 10px; border: 2px solid #ef4444;';
                    adminBadge.textContent = 'üîê ADMIN';
                    byAi.appendChild(adminBadge);
                }
                
                // Deschide prima paginƒÉ admin
                showPage('bifeaza-evenimente');
            } else {
                alert('‚ùå ParolƒÉ incorectƒÉ!');
            }
        }
        
        function logoutAdmin() {
            if (confirm('Sigur vrei sƒÉ ie»ôi din modul admin?')) {
                isAdminMode = false;
                
                // ASCUNDE meniul admin
                document.getElementById('adminMenu').style.display = 'none';
                
                // ARATƒÇ meniul normal
                document.getElementById('mainMenu').style.display = 'block';
                
                // ReseteazƒÉ header-ul
                const header = document.querySelector('.sidebar-header');
                header.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                
                // »òterge badge-ul admin
                const adminBadge = document.getElementById('adminBadge');
                if (adminBadge) adminBadge.remove();
                
                // Revino la pagina principalƒÉ
                showPage('home');
                document.querySelectorAll('.menu-item')[0].click();
                
                alert('‚úÖ Ai ie»ôit din modul admin!');
            }
        }
        
        // Admin Functions
        function exportAllData() {
            alert('üì• Export date √Æn curs...\n\nFunc»õionalitate √Æn dezvoltare!');
        }
        
        function backupDatabase() {
            alert('üíæ Backup database √Æn curs...\n\nFunc»õionalitate √Æn dezvoltare!');
        }
        
        function viewLogs() {
            alert('üìã Deschidere log-uri...\n\nFunc»õionalitate √Æn dezvoltare!');
        }
        
        function clearOldData() {
            if (confirm('‚ö†Ô∏è ATEN»öIE!\n\nSigur vrei sƒÉ »ôtergi datele vechi?\n\nAceastƒÉ ac»õiune NU poate fi anulatƒÉ!')) {
                alert('üóëÔ∏è »òtergere date √Æn curs...\n\nFunc»õionalitate √Æn dezvoltare!');
            }
        }
        
        function regenerateKeys() {
            if (confirm('‚ö†Ô∏è ATEN»öIE!\n\nRegenerarea cheilor API va invalida toate conexiunile existente!\n\nContinui?')) {
                alert('üîÑ Regenerare chei √Æn curs...\n\nFunc»õionalitate √Æn dezvoltare!');
            }
        }
        
        // Func»õie pentru gestionarea c√¢mpurilor condi»õionale la MetodƒÉ PlatƒÉ
        function handleMetodaPlataChange() {
            const metoda = document.getElementById('metodaPlata').value;
            const campCardPartial = document.getElementById('campCardPartial');
            const campCashPartial = document.getElementById('campCashPartial');
            const sumaCard = document.getElementById('sumaCard');
            const sumaCash = document.getElementById('sumaCash');
            
            // Ascunde toate c√¢mpurile mai √Ænt√¢i
            campCardPartial.style.display = 'none';
            campCashPartial.style.display = 'none';
            
            // EliminƒÉ required de pe c√¢mpuri
            sumaCard.removeAttribute('required');
            sumaCash.removeAttribute('required');
            
            // AratƒÉ c√¢mpul corespunzƒÉtor √Æn func»õie de selec»õie
            if (metoda === 'Card partial + Cash rest') {
                campCardPartial.style.display = 'block';
                sumaCard.setAttribute('required', 'required');
            } else if (metoda === 'Cash partial + Card rest') {
                campCashPartial.style.display = 'block';
                sumaCash.setAttribute('required', 'required');
            }
        }
        
        // Ata»ôeazƒÉ event listener pentru butonul secret admin
        document.addEventListener('DOMContentLoaded', function() {
            // SISTEM 10 CLICKURI SECRETE pentru butonul vizibil
            let clickCount = 0;
            let clickTimer = null;
            const secretBtn = document.getElementById('secretAdminBtn');
            
            if (secretBtn) {
                secretBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    clickCount++;
                    
                    console.log(`üîê Click ${clickCount}/10`);
                    
                    // Efect vizual la fiecare click
                    this.style.transform = 'scale(0.9)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 100);
                    
                    // SchimbƒÉ emoji-ul progresiv
                    if (clickCount === 1) this.textContent = 'üîê';
                    if (clickCount === 2) this.textContent = 'üîì';
                    if (clickCount === 3) this.textContent = 'üîë';
                    if (clickCount === 4) this.textContent = 'üóùÔ∏è';
                    if (clickCount === 5) this.textContent = '‚ú®';
                    if (clickCount === 6) this.textContent = '‚≠ê';
                    if (clickCount === 7) this.textContent = 'üåü';
                    if (clickCount === 8) this.textContent = 'üí´';
                    if (clickCount === 9) this.textContent = 'üöÄ';
                    
                    // La al 10-lea click - DESCHIDE ADMIN!
                    if (clickCount >= 10) {
                        this.textContent = 'üéâ';
                        this.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
                        checkAdminAccess();
                        clickCount = 0;
                        
                        // ReseteazƒÉ dupƒÉ 2 secunde
                        setTimeout(() => {
                            this.textContent = 'üîê';
                            this.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
                        }, 2000);
                    }
                    
                    // Reset dupƒÉ 3 secunde de inactivitate
                    clearTimeout(clickTimer);
                    clickTimer = setTimeout(() => {
                        clickCount = 0;
                        this.textContent = 'üîê';
                        console.log('üîÑ Reset counter');
                    }, 3000);
                });
            }
            
            // Event listener pentru robotul din header (backup)
            const adminTrigger = document.getElementById('adminTrigger');
            if (adminTrigger) {
                adminTrigger.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    checkAdminAccess();
                });
                console.log('‚úÖ Admin trigger activated - Version: ADMIN-v2.0');
            }
            
            // Verificare versiune (pentru debug)
            console.log('üéâ SuperParty Dashboard v2.1 - 10 Secret Clicks Mode');
        });
        
        // ==================== CHAT SYSTEM ====================
        
        let currentChatEvent = null;
        let chatMessages = [];
        let chatUnreadCounts = {};
        
        // √éncarcƒÉ lista de evenimente pentru chat
        async function loadChatEvents() {
            try {
                const { data: evenimente, error } = await supabase
                    .from('evenimente')
                    .select('*')
                    .order('data_eveniment', { ascending: false });
                
                if (error) throw error;
                
                const lista = document.getElementById('chatEventsList');
                
                if (!evenimente || evenimente.length === 0) {
                    lista.innerHTML = `
                        <div style="text-align: center; padding: 40px 20px; color: #9ca3af;">
                            <div style="font-size: 48px; margin-bottom: 15px;">üì≠</div>
                            <p>Nu existƒÉ evenimente √ÆncƒÉ</p>
                        </div>
                    `;
                    return;
                }
                
                // √éncarcƒÉ numƒÉrul de mesaje necitite pentru fiecare eveniment
                await loadUnreadCounts(evenimente);
                
                lista.innerHTML = evenimente.map(eveniment => {
                    const unreadCount = chatUnreadCounts[eveniment.id] || 0;
                    const badgeHtml = unreadCount > 0 ? `<span class="unread-badge">${unreadCount}</span>` : '';
                    
                    return `
                        <div class="chat-event-item" onclick="selectChatEvent(${eveniment.id}, '${escapeHtml(eveniment.nume_copil)}', '${eveniment.data_eveniment}')">
                            <div class="chat-event-name">
                                <span>üéâ ${escapeHtml(eveniment.nume_copil)}</span>
                                ${badgeHtml}
                            </div>
                            <div class="chat-event-date">
                                <span>üìÖ</span>
                                <span>${formatDate(eveniment.data_eveniment)}</span>
                            </div>
                        </div>
                    `;
                }).join('');
                
            } catch (error) {
                console.error('Eroare la √ÆncƒÉrcarea evenimentelor:', error);
                document.getElementById('chatEventsList').innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: #ef4444;">
                        <div style="font-size: 48px; margin-bottom: 15px;">‚ö†Ô∏è</div>
                        <p>Eroare la √ÆncƒÉrcare</p>
                    </div>
                `;
            }
        }
        
        // √éncarcƒÉ numƒÉrul de mesaje necitite
        async function loadUnreadCounts(evenimente) {
            try {
                const { data: messages, error } = await supabase
                    .from('chat_messages')
                    .select('event_id, is_read')
                    .eq('is_from_client', true)
                    .eq('is_read', false);
                
                if (!error && messages) {
                    chatUnreadCounts = {};
                    messages.forEach(msg => {
                        chatUnreadCounts[msg.event_id] = (chatUnreadCounts[msg.event_id] || 0) + 1;
                    });
                }
            } catch (error) {
                console.log('Nu s-au putut √ÆncƒÉrca mesajele necitite:', error);
            }
        }
        
        // SelecteazƒÉ un eveniment pentru chat
        async function selectChatEvent(eventId, numeClient, dataEveniment) {
            currentChatEvent = { id: eventId, nume: numeClient, data: dataEveniment };
            
            // MarcheazƒÉ ca activ √Æn listƒÉ
            document.querySelectorAll('.chat-event-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.chat-event-item').classList.add('active');
            
            // Construie»ôte interfa»õa de chat
            const chatMain = document.getElementById('chatMainArea');
            chatMain.innerHTML = `
                <div class="chat-header">
                    <div class="chat-header-info">
                        <h3>üéâ ${escapeHtml(numeClient)}</h3>
                        <p>
                            <span>üìÖ ${formatDate(dataEveniment)}</span>
                        </p>
                    </div>
                    <div class="chat-header-actions">
                        <button class="chat-header-btn" onclick="markAllAsRead(${eventId})">
                            ‚úì MarcheazƒÉ citit
                        </button>
                    </div>
                </div>
                
                <div class="chat-messages" id="chatMessagesContainer">
                    <!-- Messages will be loaded here -->
                </div>
                
                <div class="chat-input-container">
                    <div class="chat-input-wrapper">
                        <textarea 
                            class="chat-input" 
                            id="chatInput" 
                            placeholder="Scrie un mesaj..."
                            rows="1"
                            onkeydown="handleChatKeyPress(event)"
                        ></textarea>
                        <div class="chat-input-actions">
                            <button class="chat-action-btn" onclick="insertEmoji()">üòä</button>
                            <button class="chat-action-btn chat-send-btn" onclick="sendChatMessage()">üì§</button>
                        </div>
                    </div>
                </div>
            `;
            
            // √éncarcƒÉ mesajele
            await loadChatMessages(eventId);
            
            // MarcheazƒÉ mesajele ca citite
            await markMessagesAsRead(eventId);
        }
        
        // √éncarcƒÉ mesajele pentru evenimentul selectat
        async function loadChatMessages(eventId) {
            try {
                const { data: messages, error } = await supabase
                    .from('chat_messages')
                    .select('*')
                    .eq('event_id', eventId)
                    .order('created_at', { ascending: true });
                
                if (error) throw error;
                
                const container = document.getElementById('chatMessagesContainer');
                
                if (!messages || messages.length === 0) {
                    container.innerHTML = `
                        <div class="chat-empty-state">
                            <div class="chat-empty-state-icon">üí¨</div>
                            <h3>Nicio conversa»õie √ÆncƒÉ</h3>
                            <p>Trimite primul mesaj pentru a √Æncepe conversa»õia cu acest client</p>
                        </div>
                    `;
                    return;
                }
                
                chatMessages = messages;
                displayChatMessages();
                
            } catch (error) {
                console.error('Eroare la √ÆncƒÉrcarea mesajelor:', error);
            }
        }
        
        // Afi»ôeazƒÉ mesajele √Æn chat
        function displayChatMessages() {
            const container = document.getElementById('chatMessagesContainer');
            
            container.innerHTML = chatMessages.map(msg => {
                const isSent = !msg.is_from_client;
                const time = new Date(msg.created_at).toLocaleTimeString('ro-RO', { hour: '2-digit', minute: '2-digit' });
                const initials = isSent ? 'ü§µ' : getInitials(currentChatEvent.nume);
                
                return `
                    <div class="chat-message ${isSent ? 'sent' : ''}">
                        <div class="chat-message-avatar">${initials}</div>
                        <div class="chat-message-content">
                            <div class="chat-message-bubble">
                                <div class="chat-message-text">${escapeHtml(msg.message_text)}</div>
                            </div>
                            <div class="chat-message-time">${time}</div>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Scroll la ultimul mesaj
            container.scrollTop = container.scrollHeight;
        }
        
        // Trimite mesaj
        async function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const messageText = input.value.trim();
            
            if (!messageText || !currentChatEvent) return;
            
            try {
                const { data, error } = await supabase
                    .from('chat_messages')
                    .insert([{
                        event_id: currentChatEvent.id,
                        message_text: messageText,
                        is_from_client: false,
                        is_read: true,
                        created_at: new Date().toISOString()
                    }])
                    .select();
                
                if (error) throw error;
                
                // AdaugƒÉ mesajul √Æn listƒÉ
                chatMessages.push(data[0]);
                displayChatMessages();
                
                // CurƒÉ»õƒÉ input-ul
                input.value = '';
                input.style.height = 'auto';
                
            } catch (error) {
                console.error('Eroare la trimiterea mesajului:', error);
                alert('‚ùå Eroare la trimiterea mesajului');
            }
        }
        
        // Handle Enter key pentru trimitere
        function handleChatKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendChatMessage();
            }
        }
        
        // InsereazƒÉ emoji √Æn input
        function insertEmoji() {
            const emojis = ['üòä', 'üëç', '‚ù§Ô∏è', 'üéâ', 'üéÇ', 'üéà', '‚ú®', 'üåü', 'üíñ', 'üòÑ'];
            const emoji = emojis[Math.floor(Math.random() * emojis.length)];
            const input = document.getElementById('chatInput');
            input.value += emoji;
            input.focus();
        }
        
        // MarcheazƒÉ toate mesajele ca citite
        async function markMessagesAsRead(eventId) {
            try {
                await supabase
                    .from('chat_messages')
                    .update({ is_read: true })
                    .eq('event_id', eventId)
                    .eq('is_from_client', true);
                
                // ActualizeazƒÉ contorul
                chatUnreadCounts[eventId] = 0;
                
                // Re√ÆncarcƒÉ lista
                await loadChatEvents();
                
            } catch (error) {
                console.error('Eroare la marcarea mesajelor:', error);
            }
        }
        
        // MarcheazƒÉ toate ca citite (buton)
        async function markAllAsRead(eventId) {
            await markMessagesAsRead(eventId);
            alert('‚úÖ Toate mesajele au fost marcate ca citite!');
        }
        
        // CautƒÉ evenimente √Æn chat
        function searchChatEvents() {
            const searchTerm = document.getElementById('chatSearchInput').value.toLowerCase();
            const items = document.querySelectorAll('.chat-event-item');
            
            items.forEach(item => {
                const text = item.textContent.toLowerCase();
                item.style.display = text.includes(searchTerm) ? 'block' : 'none';
            });
        }
        
        // Func»õie helper pentru ini»õiale
        function getInitials(name) {
            if (!name) return '?';
            const parts = name.split(' ');
            if (parts.length >= 2) {
                return (parts[0][0] + parts[1][0]).toUpperCase();
            }
            return name.substring(0, 2).toUpperCase();
        }
        
        // Helper pentru escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // √éncarcƒÉ chat-ul c√¢nd pagina este deschisƒÉ
        const originalShowPage = showPage;
        showPage = function(pageId) {
            originalShowPage(pageId);
            
            if (pageId === 'chat-clienti') {
                loadChatEvents();
            }
        };
    </script>
</body>
</html>
